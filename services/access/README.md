# Access-service

Access-service разработан для того, чтобы решать несколько связанных задач:

### CRUD операции с *Ролями*
*Роль* - именованный набор разрешений. 
Например роль `ydb.admin` говорит о том, что у *субьекта* есть следующие разрешения:
- Доступ чтению данных в YDB (строки, колонки, пользователи, топики)
- Доступ к изменению данных в YDB

Access-service управляет полным цикл жизни ролей:
- создавать роли 
- получать роли 
- удалять роли

Благодаря тому, что это единственный сервис, который имеет прямой 
доступ к ролям, данные гарантированно остаются консистентными.

### CRUD операции с *Правилами доступа*
*Правило доступа* - набор данных `{субьект, роль, ресурс}`,
означающий, что у *Субьекта* есть доступ к *Ресурсу* в рамках *Роли*.

Например Правило доступа `{IvanKhomyakov, clickhouse.reader, clickhouse_prod}`
говорит о том, что у Ивана Хомякова есть возможность ходить в **ClickHouse**, который находится на проде
Access-service управляет полным цикл *Правил доступа*:
- создавать *Правила доступа*
- Проверять *Правила доступа*
- удалять *Правила доступа*

Благодаря тому, что это единственный сервис, который имеет прямой
доступ к ролям, данные гарантированно остаются консистентными.

Для проверки правил доступа Access-service ходит в Token-service для того, чтобы
проверить токен на корректность получить `account_id`

## Внешние зависимости сервиса
- Access-service предоставляет GRPC API для внешних сервисов
- Access-service ходит к Token-service так же по GRPC API
- В качестве хранилища данных предусмотрена СУБД PostgreSQL
- 